"use strict";(self.webpackChunkcornerstone_issuer=self.webpackChunkcornerstone_issuer||[]).push([[572],{9055:function(e,n,r){var i=r(4554),t=r(184);n.Z=function(e){var n=e.alt,r=e.children,a=e.component,o=e.src,s=e.sx;return(0,t.jsx)(i.Z,{alt:n,component:a,src:o,sx:s,children:r})}},816:function(e,n,r){var i=r(439),t=r(184);n.Z=function(e){var n=e.children,r=e.color,a=e.disabled,o=e.endIcon,s=e.onClick,c=e.size,l=e.startIcon,d=e.sx,u=e.type,m=e.variant;return(0,t.jsx)(i.Z,{color:r,disabled:a,endIcon:o,onClick:s,size:c,sx:d,startIcon:l,type:u,variant:m,children:n})}},5589:function(e,n,r){var i=r(2506),t=r(184);n.Z=function(e){var n=e.children;return(0,t.jsx)(i.l0,{children:n})}},8425:function(e,n,r){var i=r(2506),t=r(184);n.Z=function(e){var n=e.children,r=e.initialValues,a=e.onSubmit;return(0,t.jsx)(i.J9,{initialValues:r,onSubmit:a,children:n})}},4695:function(e,n,r){var i=r(3006),t=r(184);n.Z=function(e){var n=e.disabled,r=e.focused,a=e.fullWidth,o=e.id,s=e.label,c=e.name,l=e.onChange,d=e.required,u=e.sx,m=e.type,h=e.value;return(0,t.jsx)(i.Z,{disabled:n,focused:r,fullWidth:a,id:o,label:s,name:c,onChange:l,required:d,sx:u,type:m,value:h})}},9624:function(e,n,r){var i=r(4567),t=r(184);n.Z=function(e){var n=e.align,r=e.children,a=e.color,o=e.sx,s=e.variant;return(0,t.jsx)(i.Z,{align:n,color:a||"#777",sx:o,variant:s,children:r})}},7572:function(e,n,r){r.r(n),r.d(n,{default:function(){return y}});var i=r(4165),t=r(5861),a=r(885),o=r(2791),s=r(4569),c=r.n(s),l=r(9098),d=r(3439),u=r(9045),m=r(6960),h=r(9624),f=r(792),x=r(3044),v=r(4721),p=r(9055),Z=r(816),b=r(8425),j=r(5589),g=r(4695),C=r(184),_=function(e){var n=e.connectionId,r=e.handleClose,s=e.open,l=(0,o.useState)(!1),d=(0,a.Z)(l,2),_=d[0],y=d[1],N=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,m.Am.promise(c().post("/api/v1/cornerstone/issuer/credential/offer",n).then((function(e){console.log(e.data),m.Am.success("Sent credential offer!")})).catch((function(e){m.Am.error(e.response.data.msg)})),{pending:"Sending..."});case 3:y(!1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,C.jsx)(f.Z,{onClose:r,open:s,children:(0,C.jsxs)(p.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",boxShadow:24,backgroundColor:"background.paper",borderRadius:"1rem",p:"3rem 4rem 3rem 3rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[(0,C.jsx)(x.Z,{sx:{m:1},children:(0,C.jsx)(u.Z,{})}),(0,C.jsx)(h.Z,{variant:"h5",children:"Issue a Cornerstone Credential"}),(0,C.jsx)(v.Z,{}),(0,C.jsx)(b.Z,{initialValues:{schema_id:"",cred_def_id:"",connection_id:n,lprNumber:"",givenName:"",familyName:"",gender:"",birthDate:"",birthCountry:""},onSubmit:function(e,n){n.resetForm;N(e)},children:function(e){var n=e.values,r=e.handleChange;return(0,C.jsxs)(j.Z,{children:[(0,C.jsx)("div",{children:(0,C.jsx)(g.Z,{id:"connection_id",name:"connection_id",value:n.connection_id,label:"Connection ID",sx:{m:"1rem"},required:!0,disabled:!0})}),(0,C.jsxs)("div",{children:[(0,C.jsx)(g.Z,{id:"schema_id",name:"schema_id",value:n.schema_id,onChange:r,label:"Schema ID",sx:{m:"1rem"},required:!0}),(0,C.jsx)(g.Z,{id:"cred_def_id",name:"cred_def_id",value:n.cred_def_id,onChange:r,label:"Credential Definition ID",sx:{m:"1rem"},required:!0})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(g.Z,{id:"lprNumber",name:"lprNumber",value:n.lprNumber,onChange:r,label:"ID Number",sx:{m:"1rem"},required:!0}),(0,C.jsx)(g.Z,{id:"givenName",name:"givenName",value:n.givenName,onChange:r,label:"First Name",sx:{m:"1rem"},required:!0})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(g.Z,{id:"familyName",name:"familyName",value:n.familyName,onChange:r,label:"Last Name",sx:{m:"1rem"},required:!0}),(0,C.jsx)(g.Z,{id:"gender",name:"gender",value:n.gender,onChange:r,label:"Gender",sx:{m:"1rem"},required:!0})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(g.Z,{id:"birthDate",name:"birthDate",value:n.birthDate,onChange:r,label:"D.O.B",sx:{m:"1rem"},required:!0}),(0,C.jsx)(g.Z,{id:"birthCountry",name:"birthCountry",value:n.birthCountry,onChange:r,label:"Country of Birth",sx:{m:"1rem"},required:!0})]}),(0,C.jsx)("div",{children:(0,C.jsx)(Z.Z,{variant:"contained",type:"submit",sx:{color:"#fff",m:"1rem"},disabled:_,children:"Send"})})]})}})]})})},y=function(){var e=(0,o.useState)([]),n=(0,a.Z)(e,2),r=n[0],s=n[1],f=(0,o.useState)(!1),x=(0,a.Z)(f,2),v=x[0],p=x[1],Z=(0,o.useState)(""),b=(0,a.Z)(Z,2),j=b[0],g=b[1];(0,o.useEffect)((function(){c().get("/api/v1/cornerstone/issuer/connections?state=active").then((function(e){s(e.data)})).catch((function(e){return console.log(e)}))}),[]);var y=function(){var e=(0,t.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Am.promise(c().get("/api/v1/cornerstone/issuer/connections").then((function(e){s(e.data),m.Am.success("Refreshed connections!")})).catch((function(e){return console.log(e)})),{pending:"Refreshing..."});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=(0,C.jsx)(_,{connectionId:j,handleClose:function(){return p(!1)},open:v});return(0,C.jsxs)("div",{style:{margin:"2rem"},children:[(0,C.jsx)(l.ZP,{style:{padding:"1rem"},title:(0,C.jsx)(h.Z,{variant:"h5",sx:{textDecoration:"underline"},children:"Connections"}),data:r,columns:[{title:(0,C.jsx)(h.Z,{variant:"h6",children:"Name"}),field:"their_label"},{title:(0,C.jsx)(h.Z,{variant:"h6",children:"Connected On"}),field:"created_at",type:"datetime"},{title:(0,C.jsx)(h.Z,{variant:"h6",children:"Connection ID"}),field:"connection_id"},{title:(0,C.jsx)(h.Z,{variant:"h6",children:"Connection State"}),field:"state"}],actions:[{icon:function(){return(0,C.jsx)(d.Z,{})},tooltip:"Refresh connections",isFreeAction:!0,onClick:function(){return y()}},function(e){return{icon:function(){return(0,C.jsx)(u.Z,{})},tooltip:"Issue Credential",onClick:function(){p(!0),g(e.connection_id)}}}],options:{actionsColumnIndex:-1}}),N]})}}}]);
//# sourceMappingURL=572.706c8119.chunk.js.map