"use strict";(self.webpackChunkcornerstone_issuer=self.webpackChunkcornerstone_issuer||[]).push([[670],{9055:function(e,n,r){var i=r(4554),c=r(184);n.Z=function(e){var n=e.alt,r=e.children,t=e.component,a=e.src,s=e.sx;return(0,c.jsx)(i.Z,{alt:n,component:t,src:a,sx:s,children:r})}},816:function(e,n,r){var i=r(6151),c=r(184);n.Z=function(e){var n=e.children,r=e.color,t=e.disabled,a=e.endIcon,s=e.onClick,d=e.size,o=e.startIcon,u=e.sx,l=e.type,x=e.variant;return(0,c.jsx)(i.Z,{color:r,disabled:t,endIcon:a,onClick:s,size:d,sx:u,startIcon:o,type:l,variant:x,children:n})}},656:function(e,n,r){var i=r(7621),c=r(9504),t=r(184);n.Z=function(e){var n=e.children,r=e.sx;return(0,t.jsx)(i.Z,{sx:r,children:(0,t.jsx)(c.Z,{children:n})})}},5589:function(e,n,r){var i=r(2506),c=r(184);n.Z=function(e){var n=e.children;return(0,c.jsx)(i.l0,{children:n})}},8425:function(e,n,r){var i=r(2506),c=r(184);n.Z=function(e){var n=e.children,r=e.initialValues,t=e.onSubmit;return(0,c.jsx)(i.J9,{initialValues:r,onSubmit:t,children:n})}},6321:function(e,n,r){var i=r(1889),c=r(184);n.Z=function(e){var n=e.children,r=e.container,t=e.item,a=e.justify,s=e.md,d=e.spacing,o=e.xs;return(0,c.jsx)(i.ZP,{container:r,item:t,justify:a,md:s,spacing:d,xs:o,children:n})}},3434:function(e,n,r){var i=r(5021),c=r(184);n.Z=function(e){var n=e.children,r=e.disablePadding,t=e.onClick,a=e.sx;return(0,c.jsx)(i.ZP,{disablePadding:r,onClick:t,sx:a,children:n})}},7774:function(e,n,r){var i=r(9900),c=(r(2791),r(184));n.Z=function(e){var n=e.color,r=e.primary,t=e.sx;return(0,c.jsx)(i.Z,{color:n,primary:r,sx:{sx:t}})}},6484:function(e,n,r){var i=r(1413),c=r(5987),t=r(3896),a=r(184),s=["label"];n.Z=function(e){var n=e.label,r=(0,c.Z)(e,s);return(0,a.jsx)(t.Z,(0,i.Z)({label:n},r))}},4373:function(e,n,r){r.d(n,{P:function(){return u},x:function(){return o}});var i=r(1413),c=r(5987),t=r(9055),a=r(9624),s=r(184),d=["children","value","index"],o=function(e){var n=e.children,r=e.value,o=e.index,u=(0,c.Z)(e,d);return(0,s.jsx)("div",(0,i.Z)((0,i.Z)({role:"tabpanel",hidden:r!==o,id:"custom-tabpanel-".concat(o),"aria-labelledby":"custom-tab-".concat(o)},u),{},{children:r===o&&(0,s.jsx)(t.Z,{sx:{p:3},children:(0,s.jsx)(a.Z,{children:n})})}))},u=function(e){return{id:"custom-tab-".concat(e),"aria-controls":"custom-tabpanel-".concat(e)}}},5192:function(e,n,r){var i=r(5228),c=r(184);n.Z=function(e){var n=e.ariaLabel,r=e.children,t=e.onChange,a=e.value;return(0,c.jsx)(i.Z,{"aria-label":n,onChange:t,value:a,children:r})}},4695:function(e,n,r){var i=r(7391),c=r(184);n.Z=function(e){var n=e.focused,r=e.fullWidth,t=e.id,a=e.label,s=e.name,d=e.onChange,o=e.required,u=e.sx,l=e.type,x=e.value;return(0,c.jsx)(i.Z,{focused:n,fullWidth:r,id:t,label:a,name:s,onChange:d,required:o,sx:u,type:l,value:x})}},9624:function(e,n,r){var i=r(890),c=r(184);n.Z=function(e){var n=e.align,r=e.children,t=e.color,a=e.sx,s=e.variant;return(0,c.jsx)(i.Z,{align:n,color:t,sx:a,variant:s,children:r})}},7670:function(e,n,r){r.r(n),r.d(n,{default:function(){return k}});var i=r(1413),c=r(885),t=r(2791),a=r(9055),s=r(5192),d=r(6484),o=r(4373),u=r(8214),l=r(5861),x=r(4569),m=r.n(x),h=r(6960),f=r(816),v=r(656),Z=r(8425),p=r(5589),j=r(6321),_=r(3434),b=r(7774),g=r(4695),C=r(184),y=function(){var e=(0,t.useState)([]),n=(0,c.Z)(e,2),r=n[0],i=n[1],a=(0,t.useState)(!1),s=(0,c.Z)(a,2),d=s[0],o=s[1],x=(0,t.useState)("");(0,t.useEffect)((function(){m().get("credential/requests").then((function(e){console.log(e.data),i(e.data)})).catch((function(e){return console.log(e)}))}),[]);var y=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(n,r,i,c){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Am.promise(m().post("/api/v1/cornerstone/issuer/credential/offer?cred_ex_id="+n,{id_no:r,schema_id:i,cred_def_id:c}).then((function(e){o(!0),h.Am.success("Approved!")})).catch((function(e){h.Am.error(e.response.data.msg)})),{pending:"Approving..."});case 2:case"end":return e.stop()}}),e)})));return function(n,r,i,c){return e.apply(this,arguments)}}(),k=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(n,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Am.promise(m().post("/api/v1/cornerstone/issuer/credential/issue?cred_ex_id="+n,{comment:r}).then((function(e){o(!0),h.Am.success("Issued!")})).catch((function(e){h.Am.error(e.response.data.msg)})),{pending:"Issuing..."});case 2:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();return(0,C.jsx)(j.Z,{container:!0,justify:"center",spacing:2,children:r?0===r.length?(0,C.jsx)(v.Z,{sx:{m:"1rem"},children:"No credential requests available!"}):r.map((function(e,n){return(0,C.jsx)(j.Z,{item:!0,xs:12,md:4,children:(0,C.jsxs)(v.Z,{sx:{m:"1rem",wordWrap:"break-word"},children:[(0,C.jsx)(_.Z,{children:(0,C.jsx)(b.Z,{primary:"Request sent: "+e.cred_ex_record.created_at})}),(0,C.jsx)(_.Z,{children:(0,C.jsx)(b.Z,{primary:"Connection ID: "+e.cred_ex_record.connection_id})}),(0,C.jsx)(_.Z,{children:(0,C.jsx)(b.Z,{primary:"Credential Exchange ID: "+e.cred_ex_record.cred_ex_id})}),(0,C.jsx)(_.Z,{children:(0,C.jsx)(b.Z,{primary:"State: "+e.cred_ex_record.state})}),(0,C.jsx)(_.Z,{children:(0,C.jsx)(b.Z,{primary:"Request Comment: "+e.cred_ex_record.cred_proposal.comment})}),(0,C.jsx)(_.Z,{children:(0,C.jsx)(b.Z,{primary:"Credential Preview: "})}),e.cred_ex_record.cred_preview.attributes.map((function(e,n){return"lprNumber"===e.name&&(x=e.value),(0,C.jsx)(_.Z,{children:(0,C.jsx)(b.Z,{primary:"Attribute: "+e.name+", Value: "+e.value})},n)})),"proposal-received"===e.cred_ex_record.state?(0,C.jsx)(Z.Z,{initialValues:{id_num:x,schema_id:"",cred_def_id:""},onSubmit:function(n,r){var i=r.resetForm;y(e.cred_ex_record.cred_ex_id,n.id_num,n.schema_id,n.cred_def_id),i()},children:function(e){var n=e.values,r=e.handleChange;return(0,C.jsxs)(p.Z,{children:[(0,C.jsx)("div",{children:(0,C.jsx)(g.Z,{id:"schema_id",name:"schema_id",value:n.schema_id,onChange:r,label:"Schema ID",sx:{m:"1rem"},required:!0})}),(0,C.jsx)("div",{children:(0,C.jsx)(g.Z,{id:"cred_def_id",name:"cred_def_id",value:n.cred_def_id,onChange:r,label:"Credential Definition ID",sx:{m:"1rem"},required:!0})}),(0,C.jsx)("div",{children:(0,C.jsx)(f.Z,{variant:"contained",type:"submit",sx:{color:"#fff",m:"1rem"},disabled:d,children:"Approve"})})]})}}):"","request-received"===e.cred_ex_record.state?(0,C.jsx)(Z.Z,{initialValues:{comment:""},onSubmit:function(n,r){var i=r.resetForm;k(e.cred_ex_record.cred_ex_id,n.comment),i()},children:function(e){var n=e.values,r=e.handleChange;return(0,C.jsxs)(p.Z,{children:[(0,C.jsx)("div",{children:(0,C.jsx)(g.Z,{id:"comment",name:"comment",value:n.comment,onChange:r,label:"Comment",sx:{m:"1rem"},required:!0})}),(0,C.jsx)("div",{children:(0,C.jsx)(f.Z,{variant:"contained",type:"submit",sx:{color:"#fff",m:"1rem"},disabled:d,children:"Issue"})})]})}}):"",(0,C.jsx)(_.Z,{sx:{backgroundColor:"#eee"},children:(0,C.jsx)(b.Z,{primary:"Last updated at: "+e.cred_ex_record.updated_at})})]},n)})})):(0,C.jsx)(v.Z,{sx:{m:"1rem"},children:"No credential requests available!"})})},k=function(){var e=(0,t.useState)(0),n=(0,c.Z)(e,2),r=n[0],u=n[1];return(0,C.jsxs)("div",{style:{margin:"1rem"},children:[(0,C.jsx)(a.Z,{children:(0,C.jsx)(s.Z,{value:r,onChange:function(e,n){u(n)},ariaLabel:"Credentials Tabs",children:(0,C.jsx)(d.Z,(0,i.Z)({label:"Requested"},(0,o.P)(0)))})}),(0,C.jsx)(o.x,{value:r,index:0,children:(0,C.jsx)(y,{})})]})}}}]);
//# sourceMappingURL=670.7c0c9c79.chunk.js.map