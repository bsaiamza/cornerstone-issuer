"use strict";(self.webpackChunkcornerstone_issuer=self.webpackChunkcornerstone_issuer||[]).push([[670],{9055:function(e,r,n){var i=n(4554),t=n(184);r.Z=function(e){var r=e.alt,n=e.children,a=e.component,c=e.src,o=e.sx;return(0,t.jsx)(i.Z,{alt:r,component:a,src:c,sx:o,children:n})}},816:function(e,r,n){var i=n(439),t=n(184);r.Z=function(e){var r=e.children,n=e.color,a=e.disabled,c=e.endIcon,o=e.onClick,s=e.size,d=e.startIcon,u=e.sx,l=e.type,x=e.variant;return(0,t.jsx)(i.Z,{color:n,disabled:a,endIcon:c,onClick:o,size:s,sx:u,startIcon:d,type:l,variant:x,children:r})}},656:function(e,r,n){var i=n(7621),t=n(9504),a=n(184);r.Z=function(e){var r=e.children,n=e.sx;return(0,a.jsx)(i.Z,{sx:n,elevation:3,children:(0,a.jsx)(t.Z,{children:r})})}},5589:function(e,r,n){var i=n(2506),t=n(184);r.Z=function(e){var r=e.children;return(0,t.jsx)(i.l0,{children:r})}},8425:function(e,r,n){var i=n(2506),t=n(184);r.Z=function(e){var r=e.children,n=e.initialValues,a=e.onSubmit;return(0,t.jsx)(i.J9,{initialValues:n,onSubmit:a,children:r})}},6321:function(e,r,n){var i=n(1889),t=n(184);r.Z=function(e){var r=e.children,n=e.container,a=e.item,c=e.justify,o=e.md,s=e.spacing,d=e.xs;return(0,t.jsx)(i.ZP,{container:n,item:a,justify:c,md:o,spacing:s,xs:d,children:r})}},3434:function(e,r,n){var i=n(5021),t=n(184);r.Z=function(e){var r=e.children,n=e.disablePadding,a=e.onClick,c=e.sx;return(0,t.jsx)(i.ZP,{disablePadding:n,onClick:a,sx:c,children:r})}},7774:function(e,r,n){var i=n(9900),t=(n(2791),n(184));r.Z=function(e){var r=e.color,n=e.primary,a=e.sx;return(0,t.jsx)(i.Z,{color:r,primary:n,sx:{sx:a}})}},6484:function(e,r,n){var i=n(1413),t=n(5987),a=n(3896),c=n(184),o=["label"];r.Z=function(e){var r=e.label,n=(0,t.Z)(e,o);return(0,c.jsx)(a.Z,(0,i.Z)({label:r},n))}},4373:function(e,r,n){n.d(r,{P:function(){return u},x:function(){return d}});var i=n(1413),t=n(5987),a=n(9055),c=n(9624),o=n(184),s=["children","value","index"],d=function(e){var r=e.children,n=e.value,d=e.index,u=(0,t.Z)(e,s);return(0,o.jsx)("div",(0,i.Z)((0,i.Z)({role:"tabpanel",hidden:n!==d,id:"custom-tabpanel-".concat(d),"aria-labelledby":"custom-tab-".concat(d)},u),{},{children:n===d&&(0,o.jsx)(a.Z,{sx:{p:3},children:(0,o.jsx)(c.Z,{children:r})})}))},u=function(e){return{id:"custom-tab-".concat(e),"aria-controls":"custom-tabpanel-".concat(e)}}},5192:function(e,r,n){var i=n(2101),t=n(184);r.Z=function(e){var r=e.ariaLabel,n=e.children,a=e.onChange,c=e.value;return(0,t.jsx)(i.Z,{"aria-label":r,onChange:a,value:c,children:n})}},4695:function(e,r,n){var i=n(3006),t=n(184);r.Z=function(e){var r=e.disabled,n=e.focused,a=e.fullWidth,c=e.id,o=e.label,s=e.name,d=e.onChange,u=e.required,l=e.sx,x=e.type,m=e.value;return(0,t.jsx)(i.Z,{disabled:r,focused:n,fullWidth:a,id:c,label:o,name:s,onChange:d,required:u,sx:l,type:x,value:m})}},9624:function(e,r,n){var i=n(4567),t=n(184);r.Z=function(e){var r=e.align,n=e.children,a=e.color,c=e.sx,o=e.variant;return(0,t.jsx)(i.Z,{align:r,color:a||"#777",sx:c,variant:o,children:n})}},7670:function(e,r,n){n.r(r),n.d(r,{default:function(){return w}});var i=n(1413),t=n(885),a=n(2791),c=n(9055),o=n(5192),s=n(6484),d=n(4373),u=n(4165),l=n(5861),x=n(4569),m=n.n(x),f=n(6960),v=n(816),Z=n(656),h=n(8425),p=n(5589),j=n(6321),_=n(3434),b=n(7774),C=n(4695),g=n(184),y=function(){var e=(0,a.useState)([]),r=(0,t.Z)(e,2),n=r[0],i=r[1],c=(0,a.useState)(!1),o=(0,t.Z)(c,2),s=o[0],d=o[1],x=(0,a.useState)("");(0,a.useEffect)((function(){m().get("/api/v1/cornerstone/issuer/credential/requests").then((function(e){console.log(e.data),i(e.data)})).catch((function(e){return console.log(e)}))}),[]);var y=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(r,n,i,t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Am.promise(m().post("/api/v1/cornerstone/issuer/credential/offer?cred_ex_id="+r,{id_no:n,schema_id:i,cred_def_id:t}).then((function(e){d(!0),f.Am.success("Approved!")})).catch((function(e){f.Am.error(e.response.data.msg)})),{pending:"Approving..."});case 2:case"end":return e.stop()}}),e)})));return function(r,n,i,t){return e.apply(this,arguments)}}(),w=function(){var e=(0,l.Z)((0,u.Z)().mark((function e(r,n){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Am.promise(m().post("/api/v1/cornerstone/issuer/credential/issue?cred_ex_id="+r,{comment:n}).then((function(e){d(!0),f.Am.success("Issued!")})).catch((function(e){f.Am.error(e.response.data.msg)})),{pending:"Issuing..."});case 2:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}();return(0,g.jsx)(j.Z,{container:!0,justify:"center",spacing:2,children:n?0===n.length?(0,g.jsx)(Z.Z,{sx:{m:"1rem"},children:"No credential requests available!"}):n.map((function(e,r){return(0,g.jsx)(j.Z,{item:!0,xs:12,md:4,children:(0,g.jsxs)(Z.Z,{sx:{m:"1rem",wordWrap:"break-word"},children:[(0,g.jsx)(_.Z,{children:(0,g.jsx)(b.Z,{primary:"Request sent: "+e.cred_ex_record.created_at})}),(0,g.jsx)(_.Z,{children:(0,g.jsx)(b.Z,{primary:"Connection ID: "+e.cred_ex_record.connection_id})}),(0,g.jsx)(_.Z,{children:(0,g.jsx)(b.Z,{primary:"Credential Exchange ID: "+e.cred_ex_record.cred_ex_id})}),(0,g.jsx)(_.Z,{children:(0,g.jsx)(b.Z,{primary:"State: "+e.cred_ex_record.state})}),(0,g.jsx)(_.Z,{children:(0,g.jsx)(b.Z,{primary:"Request Comment: "+e.cred_ex_record.cred_proposal.comment})}),(0,g.jsx)(_.Z,{children:(0,g.jsx)(b.Z,{primary:"Credential Preview: "})}),e.cred_ex_record.cred_preview.attributes.map((function(e,r){return"lprNumber"===e.name&&(x=e.value),(0,g.jsx)(_.Z,{children:(0,g.jsx)(b.Z,{primary:"Attribute: "+e.name+", Value: "+e.value})},r)})),"proposal-received"===e.cred_ex_record.state?(0,g.jsx)(h.Z,{initialValues:{id_num:x,schema_id:"",cred_def_id:""},onSubmit:function(r,n){var i=n.resetForm;y(e.cred_ex_record.cred_ex_id,r.id_num,r.schema_id,r.cred_def_id),i()},children:function(e){var r=e.values,n=e.handleChange;return(0,g.jsxs)(p.Z,{children:[(0,g.jsx)("div",{children:(0,g.jsx)(C.Z,{id:"schema_id",name:"schema_id",value:r.schema_id,onChange:n,label:"Schema ID",sx:{m:"1rem"},required:!0})}),(0,g.jsx)("div",{children:(0,g.jsx)(C.Z,{id:"cred_def_id",name:"cred_def_id",value:r.cred_def_id,onChange:n,label:"Credential Definition ID",sx:{m:"1rem"},required:!0})}),(0,g.jsx)("div",{children:(0,g.jsx)(v.Z,{variant:"contained",type:"submit",sx:{color:"#fff",m:"1rem"},disabled:s,children:"Approve"})})]})}}):"","request-received"===e.cred_ex_record.state?(0,g.jsx)(h.Z,{initialValues:{comment:""},onSubmit:function(r,n){var i=n.resetForm;w(e.cred_ex_record.cred_ex_id,r.comment),i()},children:function(e){var r=e.values,n=e.handleChange;return(0,g.jsxs)(p.Z,{children:[(0,g.jsx)("div",{children:(0,g.jsx)(C.Z,{id:"comment",name:"comment",value:r.comment,onChange:n,label:"Comment",sx:{m:"1rem"},required:!0})}),(0,g.jsx)("div",{children:(0,g.jsx)(v.Z,{variant:"contained",type:"submit",sx:{color:"#fff",m:"1rem"},disabled:s,children:"Issue"})})]})}}):"",(0,g.jsx)(_.Z,{sx:{backgroundColor:"#eee"},children:(0,g.jsx)(b.Z,{primary:"Last updated at: "+e.cred_ex_record.updated_at})})]},r)})})):(0,g.jsx)(Z.Z,{sx:{m:"1rem"},children:"No credential requests available!"})})},w=function(){var e=(0,a.useState)(0),r=(0,t.Z)(e,2),n=r[0],u=r[1];return(0,g.jsxs)("div",{style:{margin:"1rem"},children:[(0,g.jsx)(c.Z,{children:(0,g.jsx)(o.Z,{value:n,onChange:function(e,r){u(r)},ariaLabel:"Credentials Tabs",children:(0,g.jsx)(s.Z,(0,i.Z)({label:"Requested"},(0,d.P)(0)))})}),(0,g.jsx)(d.x,{value:n,index:0,children:(0,g.jsx)(y,{})})]})}},7621:function(e,r,n){n.d(r,{Z:function(){return Z}});var i=n(7462),t=n(3366),a=n(2791),c=n(8182),o=n(4419),s=n(7630),d=n(3736),u=n(4841),l=n(1217);function x(e){return(0,l.Z)("MuiCard",e)}(0,n(5878).Z)("MuiCard",["root"]);var m=n(184),f=["className","raised"],v=(0,s.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(e,r){return r.root}})((function(){return{overflow:"hidden"}})),Z=a.forwardRef((function(e,r){var n=(0,d.Z)({props:e,name:"MuiCard"}),a=n.className,s=n.raised,u=void 0!==s&&s,l=(0,t.Z)(n,f),Z=(0,i.Z)({},n,{raised:u}),h=function(e){var r=e.classes;return(0,o.Z)({root:["root"]},x,r)}(Z);return(0,m.jsx)(v,(0,i.Z)({className:(0,c.Z)(h.root,a),elevation:u?8:void 0,ref:r,ownerState:Z},l))}))},9504:function(e,r,n){n.d(r,{Z:function(){return v}});var i=n(7462),t=n(3366),a=n(2791),c=n(8182),o=n(4419),s=n(7630),d=n(3736),u=n(1217);function l(e){return(0,u.Z)("MuiCardContent",e)}(0,n(5878).Z)("MuiCardContent",["root"]);var x=n(184),m=["className","component"],f=(0,s.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,r){return r.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),v=a.forwardRef((function(e,r){var n=(0,d.Z)({props:e,name:"MuiCardContent"}),a=n.className,s=n.component,u=void 0===s?"div":s,v=(0,t.Z)(n,m),Z=(0,i.Z)({},n,{component:u}),h=function(e){var r=e.classes;return(0,o.Z)({root:["root"]},l,r)}(Z);return(0,x.jsx)(f,(0,i.Z)({as:u,className:(0,c.Z)(h.root,a),ownerState:Z,ref:r},v))}))}}]);
//# sourceMappingURL=670.8a0ddd1b.chunk.js.map