"use strict";(self.webpackChunkcornerstone_issuer=self.webpackChunkcornerstone_issuer||[]).push([[352],{9055:function(e,n,r){var i=r(4554),a=r(184);n.Z=function(e){var n=e.alt,r=e.children,t=e.component,s=e.src,u=e.sx;return(0,a.jsx)(i.Z,{alt:n,component:t,src:s,sx:u,children:r})}},816:function(e,n,r){var i=r(439),a=r(184);n.Z=function(e){var n=e.children,r=e.color,t=e.disabled,s=e.endIcon,u=e.onClick,d=e.size,l=e.startIcon,o=e.sx,c=e.type,m=e.variant;return(0,a.jsx)(i.Z,{color:r,disabled:t,endIcon:s,onClick:u,size:d,sx:o,startIcon:l,type:c,variant:m,children:n})}},6321:function(e,n,r){var i=r(1889),a=r(184);n.Z=function(e){var n=e.children,r=e.container,t=e.item,s=e.justify,u=e.justifyContent,d=e.md,l=e.spacing,o=e.sx,c=e.xs;return(0,a.jsx)(i.ZP,{container:r,item:t,justify:s,justifyContent:u,md:d,spacing:l,sx:o,xs:c,children:n})}},9624:function(e,n,r){var i=r(4567),a=r(184);n.Z=function(e){var n=e.align,r=e.children,t=e.color,s=e.sx,u=e.variant;return(0,a.jsx)(i.Z,{align:n,color:t||"#777",sx:s,variant:u,children:r})}},5352:function(e,n,r){r.r(n),r.d(n,{default:function(){return W}});var i=r(1413),a=r(885),t=r(2791),s=r(9055),u=r(7621),d=r(9504),l=r(184),o=function(e){var n=e.children,r=e.sx;return(0,l.jsx)(u.Z,{sx:r,elevation:3,children:(0,l.jsx)(d.Z,{children:n})})},c=r(6321),m=r(2101),b=function(e){var n=e.ariaLabel,r=e.children,i=e.onChange,a=e.value;return(0,l.jsx)(m.Z,{"aria-label":n,onChange:i,value:a,children:r})},h=r(5987),x=r(3896),f=["label"],v=function(e){var n=e.label,r=(0,h.Z)(e,f);return(0,l.jsx)(x.Z,(0,i.Z)({label:n},r))},_=r(9624),g=["children","value","index"],j=function(e){var n=e.children,r=e.value,a=e.index,t=(0,h.Z)(e,g);return(0,l.jsx)("div",(0,i.Z)((0,i.Z)({role:"tabpanel",hidden:r!==a,id:"custom-tabpanel-".concat(a),"aria-labelledby":"custom-tab-".concat(a)},t),{},{children:r===a&&(0,l.jsx)(s.Z,{sx:{p:3},children:(0,l.jsx)(_.Z,{children:n})})}))},p=function(e){return{id:"custom-tab-".concat(e),"aria-controls":"custom-tabpanel-".concat(e)}},Z=r(3614),C=r(4165),y=r(5861),q=r(4721),S=r(5985),I=r(4569),A=r.n(I),k=r(925),D=r(9281),F=r(816),w=r(2506),B=function(e){var n=e.children,r=e.initialValues,i=e.onSubmit,a=e.validate;return(0,l.jsx)(w.J9,{initialValues:r,onSubmit:i,validate:a,children:n})},T=function(e){var n=e.children;return(0,l.jsx)(w.l0,{children:n})},V=r(3006),G=function(e){var n=e.defaultValue,r=e.disabled,a=e.error,t=e.focused,s=e.fullWidth,u=e.helperText,d=e.id,o=e.inputProps,c=e.InputLabelProps,m=e.label,b=e.name,h=e.onChange,x=e.props,f=e.required,v=e.sx,_=e.type,g=e.value;return(0,l.jsx)(V.Z,(0,i.Z)({defaultValue:n,disabled:r,error:a,focused:t,fullWidth:s,helperText:u,id:d,inputProps:o,InputLabelProps:c,label:m,name:b,onChange:h,required:f,sx:v,type:_,value:g},x))},P=r(5867),L=P.r+"/credential",E=function(e){var n={};return(0,D.Z)(e.id_number)||(n.id_number="Invalid ZA ID number!"),n},z=function(){var e=(0,t.useState)(!1),n=(0,a.Z)(e,2),r=n[0],i=n[1],s=(0,t.useState)(!1),u=(0,a.Z)(s,2),d=u[0],o=u[1],c=(0,t.useState)([]),m=(0,a.Z)(c,2),b=m[0],h=m[1],x=function(){var e=(0,y.Z)((0,C.Z)().mark((function e(n){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,S.Am.promise(A().post(L,n).then((function(e){h(e.data),o(!0),S.Am.success("Credential request generated!")})).catch((function(e){S.Am.error(e.response.data.msg)})),{pending:"Generating request..."});case 3:i(!1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_.Z,{variant:"h5",children:"Get my Cornerstone Credential"}),(0,l.jsx)(q.Z,{}),(0,l.jsx)("div",{style:{marginTop:"1rem"},children:(0,l.jsx)(B,{initialValues:{id_number:"",forenames:"",surname:"",gender:"",date_of_birth:"",country_of_birth:""},validate:E,onSubmit:function(e,n){n.resetForm;x(e)},children:function(e){var n=e.values,i=e.handleChange,a=e.touched,t=e.errors;return(0,l.jsxs)(T,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(G,{error:a.id_number&&Boolean(t.id_number),helperText:a.id_number&&t.id_number,id:"id_number",name:"id_number",value:n.id_number,onChange:i,label:"ID Number",sx:{m:"1rem"},required:!0}),(0,l.jsx)(G,{id:"forenames",name:"forenames",value:n.forenames,onChange:i,label:"Forenames",sx:{m:"1rem"},required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(G,{id:"surname",name:"surname",value:n.surname,onChange:i,label:"Surname",sx:{m:"1rem"},required:!0}),(0,l.jsx)(G,{id:"gender",name:"gender",value:n.gender=n.id_number.substring(6,7)>4?"Male":"Female",onChange:i,label:"Gender",sx:{m:"1rem"},required:!0,disabled:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(G,{id:"date_of_birth",name:"date_of_birth",value:n.date_of_birth=n.id_number.substring(0,1)>2?"19"+n.id_number.substring(0,2)+"-"+n.id_number.substring(2,4)+"-"+n.id_number.substring(4,6):"20"+n.id_number.substring(0,2)+"-"+n.id_number.substring(2,4)+"-"+n.id_number.substring(4,6),onChange:i,label:"D.O.B",sx:{m:"1rem"},required:!0,disabled:!0}),(0,l.jsx)(G,{id:"country_of_birth",name:"country_of_birth",value:n.country_of_birth="0"===n.id_number.substring(10,11)?"South Africa":"",onChange:i,label:"Country of Birth",sx:{m:"1rem"},required:!0,disabled:"0"===n.id_number.substring(10,11)})]}),(0,l.jsx)("div",{children:(0,l.jsx)(F.Z,{variant:"contained",type:"submit",sx:{color:"#fff",m:"1rem"},disabled:r,children:"Submit"})})]})}})}),d&&b.credential?(0,l.jsx)(k.Z,{value:b.credential}):""]})},M=P.r+"/credential-email",N=function(e){var n={};return(0,D.Z)(e.id_number)||(n.id_number="Invalid ZA ID number!"),n},O=function(){var e=(0,t.useState)(!1),n=(0,a.Z)(e,2),r=n[0],i=n[1],s=function(){var e=(0,y.Z)((0,C.Z)().mark((function e(n){return(0,C.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,S.Am.promise(A().post(M,n).then((function(e){S.Am.success("Credential request emailed!")})).catch((function(e){S.Am.error(e.response.data.msg)})),{pending:"Emailing request..."});case 3:i(!1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_.Z,{variant:"h5",children:"Get my Cornerstone Credential"}),(0,l.jsx)(q.Z,{}),(0,l.jsx)("div",{style:{marginTop:"1rem"},children:(0,l.jsx)(B,{initialValues:{id_number:"",forenames:"",surname:"",gender:"",date_of_birth:"",country_of_birth:""},validate:N,onSubmit:function(e,n){n.resetForm;s(e)},children:function(e){var n=e.values,i=e.handleChange,a=e.touched,t=e.errors;return(0,l.jsxs)(T,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(G,{error:a.id_number&&Boolean(t.id_number),helperText:a.id_number&&t.id_number,id:"id_number",name:"id_number",value:n.id_number,onChange:i,label:"ID Number",sx:{m:"1rem"},required:!0}),(0,l.jsx)(G,{id:"forenames",name:"forenames",value:n.forenames,onChange:i,label:"Forenames",sx:{m:"1rem"},required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(G,{id:"surname",name:"surname",value:n.surname,onChange:i,label:"Surname",sx:{m:"1rem"},required:!0}),(0,l.jsx)(G,{id:"gender",name:"gender",value:n.gender=n.id_number.substring(6,7)>4?"Male":"Female",onChange:i,label:"Gender",sx:{m:"1rem"},required:!0,disabled:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(G,{id:"date_of_birth",name:"date_of_birth",value:n.date_of_birth=n.id_number.substring(0,1)>2?"19"+n.id_number.substring(0,2)+"-"+n.id_number.substring(2,4)+"-"+n.id_number.substring(4,6):"20"+n.id_number.substring(0,2)+"-"+n.id_number.substring(2,4)+"-"+n.id_number.substring(4,6),onChange:i,label:"D.O.B",sx:{m:"1rem"},required:!0,disabled:!0}),(0,l.jsx)(G,{id:"country_of_birth",name:"country_of_birth",value:n.country_of_birth="0"===n.id_number.substring(10,11)?"South Africa":"",onChange:i,label:"Country of Birth",sx:{m:"1rem"},required:!0,disabled:"0"===n.id_number.substring(10,11)})]}),(0,l.jsx)("div",{children:(0,l.jsx)(G,{id:"email",name:"email",type:"email",value:n.email,onChange:i,label:"Email",sx:{m:"1rem"},required:!0})}),(0,l.jsx)("div",{children:(0,l.jsx)(F.Z,{variant:"contained",type:"submit",sx:{color:"#fff",m:"1rem"},disabled:r,children:"Submit"})})]})}})})]})},W=function(){var e=(0,t.useState)(0),n=(0,a.Z)(e,2),r=n[0],u=n[1];return(0,l.jsxs)(c.Z,{container:!0,justify:"center",spacing:2,sx:{p:"1rem"},children:[(0,l.jsx)(c.Z,{item:!0,xs:12,md:6,children:(0,l.jsxs)(o,{sx:{marginBottom:"5rem"},children:[(0,l.jsx)(s.Z,{children:(0,l.jsxs)(b,{value:r,onChange:function(e,n){u(n)},ariaLabel:"Credential Tabs",children:[(0,l.jsx)(v,(0,i.Z)({label:"Display"},p(0))),(0,l.jsx)(v,(0,i.Z)({label:"Email"},p(1)))]})}),(0,l.jsx)(j,{value:r,index:0,children:(0,l.jsx)(z,{})}),(0,l.jsx)(j,{value:r,index:1,children:(0,l.jsx)(O,{})})]})}),(0,l.jsx)(c.Z,{item:!0,xs:12,md:6,sx:{alignItems:"center",justifyContent:"center",textAlign:"center"},children:(0,l.jsx)(s.Z,{alt:"DI",component:"img",src:Z,sx:{height:"auto",width:"100%",opacity:.5}})})]})}},5867:function(e,n,r){r.d(n,{r:function(){return i}});var i="/api/v1/cornerstone-issuer"},3614:function(e,n,r){e.exports=r.p+"static/media/bg1.345e5d2cf63a272c3446.png"}}]);
//# sourceMappingURL=352.b1614e67.chunk.js.map